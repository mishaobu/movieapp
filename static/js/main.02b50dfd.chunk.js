(this["webpackJsonpmovie-app-react"]=this["webpackJsonpmovie-app-react"]||[]).push([[0],{120:function(e,t,a){"use strict";a.r(t);var i=a(0),s=a.n(i),n=a(16),l=a.n(n),o=(a(74),a(75),a(63)),r=a(37),c=a(38),h=a(13),d=a(44),u=a(43),v=a(64),m=(a(85),{apiKey:"AIzaSyA3PSDrSVY--kPeLB-6creeKMUc0jR-A5I",authDomain:"misha-site.firebaseapp.com",databaseURL:"https://misha-site.firebaseio.com"}),p=a(14),b=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var i;return Object(r.a)(this,a),(i=t.call(this,e)).handleDeleteClick=i.handleDeleteClick.bind(Object(h.a)(i)),i.handleListClick=i.handleListClick.bind(Object(h.a)(i)),i.state={data:[],isOpen:!1,lists:[],toolbarButtons:[s.a.createElement("button",{onClick:i.handleDeleteClick,type:"button",value:"delete",className:"deleteMovieButton"}," Delete Movie ")]},i}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e){if(e.lists!==this.props.lists){var t=[s.a.createElement("button",{onClick:this.handleDeleteClick,type:"button",value:"delete",className:"deleteMovieButton"}," Delete Movie ")];for(var a in this.props.lists){var i=this.props.lists[a];t.push([s.a.createElement("button",{onClick:this.handleListClick,type:"button",value:"list",list:i,className:"deleteMovieButton"}," Add to ",i," ")])}this.setState({toolbarButtons:t})}}},{key:"componentDidMount",value:function(){p.apps.length||p.initializeApp(m);var e=[s.a.createElement("button",{onClick:this.handleDeleteClick,type:"button",value:"delete",className:"deleteMovieButton"}," Delete Movie ")];for(var t in this.props.lists){var a=this.props.lists[t];e.push([s.a.createElement("button",{onClick:this.handleListClick,type:"button",value:"list",list:a,className:"deleteMovieButton"}," Add to ",a," ")])}this.setState({toolbarButtons:e})}},{key:"handleListClick",value:function(e){var t=e.target.getAttribute("list");p.database().ref("lists/"+t+"/"+this.props.json.imdbID).set(this.props.json.imdbID),alert(this.props.json.Title+" has been added to "+t)}},{key:"handleDeleteClick",value:function(){p.database().ref("movieid").child(this.props.json.imdbID).remove(),alert(this.props.json.Title+" has been deleted.")}},{key:"render",value:function(){var e=this,t=this.state.isOpen;return s.a.createElement("div",null,s.a.createElement("img",{className:"movieBlock",src:this.props.json.Poster,onClick:function(){return e.setState({isOpen:!0})}}),t&&s.a.createElement(v.a,{mainSrc:this.props.json.Poster,imageTitle:this.props.json.Title,imageCaption:"Directed by: "+this.props.json.Director+"   |  IMDB Rating: "+this.props.json.imdbRating,onCloseRequest:function(){return e.setState({isOpen:!1})},toolbarButtons:this.state.toolbarButtons}))}}]),a}(i.Component),f=a(33),g=a(46),k=a(49),L=a(68),C=a(30),S=a(29),E=a(66),j=a.n(E),y=a(14),D=a.n(y),N=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).state={movies:[],lists:[],activeList:"All Movies",showLists:!1,search:"",activeFilter:!1,filteredMovies:[],movieid:"",time:null,movieRef:null,list:"",moreLoadable:!1,totalLoaded:8},e.handleListSelect=e.handleListSelect.bind(Object(h.a)(e)),e.handleSearchChange=e.handleSearchChange.bind(Object(h.a)(e)),e.handleChange=e.handleChange.bind(Object(h.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(h.a)(e)),e.handleNewList=e.handleNewList.bind(Object(h.a)(e)),e.increaseLoad=e.increaseLoad.bind(Object(h.a)(e)),e.goHome=e.goHome.bind(Object(h.a)(e)),e}return Object(c.a)(a,[{key:"goHome",value:function(){var e=this;D.a.database().ref("movieid").on("value",(function(t){var a=[],i=t.val();for(var s in i)console.log(s),a.push(i[s]);e.setState({movies:a,showLists:!1,movieid:"",list:"",search:"",activeFilter:!1})}))}},{key:"increaseLoad",value:function(){var e;e=this.state.totalLoaded+8<this.state.movies.length,this.setState({moreLoadable:e,totalLoaded:this.state.totalLoaded+8})}},{key:"handleValidation",value:function(){if(""===this.state.movieid)alert("ID cannot be empty.");else{if(9==this.state.movieid.length)return!0;alert("ID should be 9 characters.")}return!1}},{key:"handleNewList",value:function(e){var t=this;e.preventDefault(),D.a.database().ref("lists/"+this.state.list).set("").then((function(){return t.setState({list:""})})),alert("New list submitted.")}},{key:"handleChange",value:function(e){this.setState(Object(o.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.handleValidation()&&(j.a.get("https://www.omdbapi.com/?apikey=fe15e914&i="+this.state.movieid).then((function(e){var a=D.a.database().ref("movieid/"+t.state.movieid);e.data.Lists=[""],console.log(e.data),setTimeout((function(){return a.set(e.data)}))})).then((function(){var e;e=t.state.movies.length>t.state.totalLoaded,t.setState({movieid:"",time:null,moreLoadable:e})})),alert("New movie submitted."))}},{key:"handleListSelect",value:function(e){var t=this;console.log("In handleListSelect",e.target);var a=e.target.getAttribute("value");if(this.setState({activeList:a}),"All Movies"!==a){var i,s=D.a.database().ref("lists/"+a);s.on("value",(function(e){var t=[];i=t;var a=e.val();for(var s in a)t.push(a[s])})),(s=D.a.database().ref("movieid")).on("value",(function(e){var a=[],s=e.val();for(var n in i)a.push(s[i[n]]);t.setState({movies:a})}))}else this.setState({showLists:!1}),D.a.database().ref("movieid").on("value",(function(e){var a=[],i=e.val();for(var s in i)a.push(i[s]);t.setState({movies:a})}))}},{key:"handleSearchChange",value:function(e){this.setState({search:e.target.value}),""!==e.target.value?this.state.activeFilter=!0:this.state.activeFilter=!1;var t=[];for(var a in this.state.movies)this.state.movies[a].Title.toLowerCase().includes(e.target.value)&&t.push(this.state.movies[a]);this.setState({filteredMovies:t})}},{key:"componentDidMount",value:function(){var e=this;D.a.apps.length||D.a.initializeApp(m),D.a.database().ref("movieid").on("value",(function(t){var a,i=[],s=t.val();for(var n in s)i.push(s[n]),console.log(n);a=e.state.totalLoaded<i.length,e.setState({movies:i,moreLoadable:a})})),D.a.database().ref("lists").on("value",(function(t){var a=["All Movies"],i=t.val();Object.keys(i).forEach((function(e){a.push(e)})),e.setState({lists:a})}))}},{key:"render",value:function(){var e=this,t=this.state.lists;return s.a.createElement("div",{className:"moviePage"},s.a.createElement(f.a,{bg:"light",expand:"lg"},s.a.createElement(f.a.Brand,{href:"#",onClick:this.goHome}," Movie Manager"),s.a.createElement(f.a.Toggle,{"aria-controls":"basic-navbar-nav"}),s.a.createElement(f.a.Collapse,{id:"basic-navbar-nav"},s.a.createElement(L.a,{className:"mr-auto"},s.a.createElement(k.a,{title:"List",id:"basic-nav-dropdown",onChange:this.handleListSelect},this.state.lists.map((function(t,a){return s.a.createElement(k.a.Item,{onClick:e.handleListSelect,value:t}," ",t," ")})))),s.a.createElement(g.a,{inline:!0,className:"listAddForm"},s.a.createElement(C.a,{className:"mr-1",type:"text",name:"list",onChange:this.handleChange,placeholder:"List Name",value:this.state.list,onSubmit:this.handleNewList}),s.a.createElement(S.a,{className:"mr-1",variant:"outline-success",onClick:this.handleNewList},"Add New List")),s.a.createElement(g.a,{inline:!0,className:"movieAddForm"},s.a.createElement(C.a,{className:"mr-1",type:"text",name:"movieid",onChange:this.handleChange,placeholder:"IMDB ID",value:this.state.movieid,onSubmit:this.handleSubmit}),s.a.createElement(S.a,{inline:!0,className:"mr-5",variant:"outline-success",onClick:this.handleSubmit},"Add Movie")),s.a.createElement(g.a,{className:"movieSearchForm"},s.a.createElement(C.a,{type:"text",name:"search",onChange:this.handleSearchChange,placeholder:"Search",value:this.state.search})))),s.a.createElement("div",{className:"movieBlockDiv"},this.state.activeFilter?this.state.filteredMovies.slice(0,this.state.totalLoaded).map((function(t,a){return s.a.createElement(b,{key:a,json:t,lists:e.state.lists})})):this.state.movies.slice(0,this.state.totalLoaded).map((function(e,a){return s.a.createElement(b,{key:a,json:e,lists:t.slice(1)})}))),this.state.moreLoadable?s.a.createElement(S.a,{center:!0,className:"mt-4",variant:"outline-success",onClick:this.increaseLoad}," Load More "):s.a.createElement(s.a.Fragment,null),s.a.createElement("br",null),s.a.createElement("br",null))}}]),a}(i.Component);a(119);var M=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(N,null))};l.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(M,null)),document.getElementById("root"))},69:function(e,t,a){e.exports=a(120)},74:function(e,t,a){},75:function(e,t,a){}},[[69,1,2]]]);
//# sourceMappingURL=main.02b50dfd.chunk.js.map